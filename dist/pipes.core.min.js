!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function accumulate(reducer,init){if(!(0,_utils.isFunction)(reducer))throw new Error(compatibilityError);var ReadableWritableBlueprint=function ReadableWritableBlueprint(){_classCallCheck(this,ReadableWritableBlueprint);var result=init,readable=void 0,writable=void 0,done=void 0,resolved=void 0,rejected=void 0,cancelled=void 0;done=new Promise(function(resolve,reject){resolved=resolve,rejected=reject}),writable=new _streams.WritableStream({start:function(err){done["catch"](rejected)},write:function(chunk){return void 0===result?void(result=chunk):void(result=reducer(result,chunk))},close:function(){resolved(result)},abort:rejected}),readable=new _streams.ReadableStream({start:function(controller){var finished=done.then(function(val){cancelled||controller.enqueue(val)},controller.error.bind(controller));finished.then(controller.close.bind(controller))},cancel:function(reason){cancelled=!0,writable.close(),resolved(reason)}}),Object.assign(this,{readable:readable,writable:writable})};return this instanceof accumulate?new ReadableWritableBlueprint:ReadableWritableBlueprint}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=accumulate;var _streams=require("./streams"),_utils=require("./utils"),compatibilityError="\n    accumulate takes a reducing function\n  ";"undefined"!=typeof module&&(module.exports=accumulate)},{"./streams":12,"./utils":13}],2:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function chain(origin){if(!(0,_utils.isTransform)(origin))throw new Error(compatibilityError);for(var _len=arguments.length,streams=Array(_len>1?_len-1:0),_key=1;_len>_key;_key++)streams[_key-1]=arguments[_key];var writable=origin.writable,readable=_connect2["default"].apply(void 0,[origin].concat(streams));if(!(0,_utils.isReadable)(readable))throw new Error(compatibilityError);return{readable:readable,writable:writable}}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=chain;var _connect=require("./connect"),_connect2=_interopRequireDefault(_connect),_utils=require("./utils"),compatibilityError="\n    Only transform streams and readable-writable pairs can be chained\n  ";"undefined"!=typeof module&&(module.exports=chain)},{"./connect":3,"./utils":13}],3:[function(require,module,exports){"use strict";function connect(origin){if(!origin)throw new Error("No streams passed");for(var sink=void 0,end=void 0,_len=arguments.length,streams=Array(_len>1?_len-1:0),_key=1;_len>_key;_key++)streams[_key-1]=arguments[_key];sink=streams.pop(),end=origin.readable||origin;var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=streams[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var stream=_step.value;if(!(0,_utils.isTransform)(stream))throw new Error("Only transform streams allowed in the center");end=end.pipeThrough(stream)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator["return"]&&_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError}}if((0,_utils.isWritable)(sink))end=end.pipeTo(sink);else{if(!(0,_utils.isTransform)(sink))throw new Error("Only writable and transform streams allowed at the end.");end=end.pipeThrough(sink)}return end}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=connect;var _utils=require("./utils");"undefined"!=typeof module&&(module.exports=connect)},{"./utils":13}],4:[function(require,module,exports){"use strict";function flatten(){for(var _len=arguments.length,streams=Array(_len),_key=0;_len>_key;_key++)streams[_key]=arguments[_key];var flattenedStream=void 0,writers=[];return flattenedStream=new _streams.ReadableStream({start:function(controller){for(;writers.length<streams.length;)writers.push(new _streams.WritableStream({write:controller.enqueue.bind(controller)}));var connect=function(r,w){return r.pipeTo(w)},pipedAll=void 0;try{pipedAll=(0,_utils.zipWith)(connect,streams,writers)}catch(e){throw new Error("Only readable streams can be flattened.")}return Promise.all(pipedAll).then(controller.close.bind(controller),controller.error.bind(controller))},cancel:function(){streams.forEach(function(stream){return stream.cancel()})}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=flatten;var _streams=require("./streams"),_utils=require("./utils");"undefined"!=typeof module&&(module.exports=flatten)},{"./streams":12,"./utils":13}],5:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.split=exports.pipe=exports.merge=exports.flatten=exports.chain=exports.connect=exports.accumulate=void 0;var _accumulate=require("./accumulate"),_accumulate2=_interopRequireDefault(_accumulate),_connect=require("./connect"),_connect2=_interopRequireDefault(_connect),_chain=require("./chain"),_chain2=_interopRequireDefault(_chain),_flatten=require("./flatten"),_flatten2=_interopRequireDefault(_flatten),_merge=require("./merge"),_merge2=_interopRequireDefault(_merge),_pipe=require("./pipe"),_pipe2=_interopRequireDefault(_pipe),_split=require("./split"),_split2=_interopRequireDefault(_split);exports.accumulate=_accumulate2["default"],exports.connect=_connect2["default"],exports.chain=_chain2["default"],exports.flatten=_flatten2["default"],exports.merge=_merge2["default"],exports.pipe=_pipe2["default"],exports.split=_split2["default"];var fns={accumulate:_accumulate2["default"],connect:_connect2["default"],chain:_chain2["default"],flatten:_flatten2["default"],merge:_merge2["default"],pipe:_pipe2["default"],split:_split2["default"]};"undefined"!=typeof window&&Object.assign(window,{Pipes:fns}),exports["default"]=fns},{"./accumulate":1,"./chain":2,"./connect":3,"./flatten":4,"./merge":6,"./pipe":7,"./split":11}],6:[function(require,module,exports){"use strict";function parseResults(results){var ended=!1,values=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=results[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step$value=_step.value,value=_step$value.value,done=_step$value.done;ended=ended||done,values.push(value)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator["return"]&&_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError}}return{value:values,done:ended}}function merge(){for(var _len=arguments.length,streams=Array(_len),_key=0;_len>_key;_key++)streams[_key]=arguments[_key];var readers=void 0,mergedStream=void 0,merger=void 0;try{readers=streams.map(function(stream){return stream.getReader()})}catch(e){throw new Error("Only ReadableStreams can be flattened")}return merger=function(controller){var promises=readers.map(function(r){return r.read()}),merged=void 0,push=void 0;return push=function(_ref){var value=_ref.value,done=_ref.done;return done?controller.close():void controller.enqueue(value)},merged=Promise.all(promises).then(parseResults).then(push,controller.error.bind(controller))},mergedStream=new _streams.ReadableStream({start:merger,pull:merger,cancel:function(){streams.forEach(function(stream){return stream.cancel()})}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=merge;var _streams=require("./streams");"undefined"!=typeof module&&(module.exports=merge)},{"./streams":12}],7:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function pipe(fn,opts){var blueprint=void 0;if((0,_utils.isGeneratorFn)(fn))blueprint=(0,_pipeGen2["default"])(fn,opts);else{if(!(0,_utils.isFunction)(fn))throw new Error("Invalid argument");blueprint=(0,_pipeFn2["default"])(fn,opts)}return this instanceof pipe?new blueprint:blueprint}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=pipe;var _utils=require("./utils"),_pipeAsync=require("./pipeAsync"),_pipeAsync2=_interopRequireDefault(_pipeAsync),_pipeFn=require("./pipeFn"),_pipeFn2=_interopRequireDefault(_pipeFn),_pipeGen=require("./pipeGen"),_pipeGen2=_interopRequireDefault(_pipeGen);pipe.async=_pipeAsync2["default"],"undefined"!=typeof module&&(module.exports=pipe)},{"./pipeAsync":8,"./pipeFn":9,"./pipeGen":10,"./utils":13}],8:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function pipeAsync(fn){var _ref=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],init=_ref.init,readableStrategy=_ref.readableStrategy,writableStrategy=_ref.writableStrategy,transformer={_unfulfilledFutures:[],transform:function(chunk,enqueue,done){var self=transformer,future=fn(chunk),condEnqueue=function(v){void 0!==v&&enqueue(v)},findex=self._unfulfilledFutures.length;return self._unfulfilledFutures.push(future),future.then(condEnqueue,function(){throw new Error}).then(function(){return self._unfulfilledFutures.splice(findex,1)}).done(done),future},flush:function(enqueue,close){var self=transformer,condEnqueue=function(v){void 0!==v&&enqueue(v)};Promise.all(self._unfulfilledFutures).then(function(vs){return vs.map(condEnqueue)}).done(close)},readableStrategy:readableStrategy,writableStrategy:writableStrategy},TransformBlueprint=function(_TransformStream){function TransformBlueprint(){var _this,_ret;_classCallCheck(this,TransformBlueprint);var stream=_this=_possibleConstructorReturn(this,Object.getPrototypeOf(TransformBlueprint).call(this,transformer));return void 0!==init&&stream.writable.write(init),_ret=stream,_possibleConstructorReturn(_this,_ret)}return _inherits(TransformBlueprint,_TransformStream),TransformBlueprint}(_streams.TransformStream);return this instanceof pipeAsync?new TransformBlueprint:TransformBlueprint}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=pipeAsync;var _streams=require("./streams");"undefined"!=typeof module&&(module.exports=pipeAsync)},{"./streams":12}],9:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function pipeFn(fn){var _ref=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],init=_ref.init,readableStrategy=_ref.readableStrategy,writableStrategy=_ref.writableStrategy,transformer={transform:function(chunk,enqueue,done){var condEnqueue=function(v){void 0!==v&&enqueue(v)};return condEnqueue(fn(chunk)),done()},readableStrategy:readableStrategy,writableStrategy:writableStrategy},TransformBlueprint=function(_TransformStream){function TransformBlueprint(){var _this,_ret;_classCallCheck(this,TransformBlueprint);var stream=_this=_possibleConstructorReturn(this,Object.getPrototypeOf(TransformBlueprint).call(this,transformer));return void 0!==init&&stream.writable.write(init),_ret=stream,_possibleConstructorReturn(_this,_ret)}return _inherits(TransformBlueprint,_TransformStream),TransformBlueprint}(_streams.TransformStream);return TransformBlueprint}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=pipeFn;var _streams=require("./streams");"undefined"!=typeof module&&(module.exports=pipeFn)},{"./streams":12}],10:[function(require,module,exports){"use strict";function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function pipeGen(fn){var _ref=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],init=_ref.init,readableStrategy=_ref.readableStrategy,writableStrategy=_ref.writableStrategy,genManager=void 0,transformer={transform:function(chunk,enqueue,done){genManager=new GenObjManager(fn(chunk),enqueue,this.readable),genManager.then(function(){return done()}),genManager.start()},flush:function(enqueue,close){genManager&&genManager.flush(),close()},readableStrategy:readableStrategy,writableStrategy:writableStrategy},TransformBlueprint=function(_TransformStream){function TransformBlueprint(){var _this,_ret;_classCallCheck(this,TransformBlueprint);var stream=_this=_possibleConstructorReturn(this,Object.getPrototypeOf(TransformBlueprint).call(this,transformer));transformer.transform=transformer.transform.bind(stream);var _pull=stream.readable._underlyingSource.pull;return stream.readable._underlyingSource.pull=function(c){return genManager&&genManager.start(),_pull(c)},void 0!==init&&stream.writable.write(init),_ret=stream,_possibleConstructorReturn(_this,_ret)}return _inherits(TransformBlueprint,_TransformStream),TransformBlueprint}(_streams.TransformStream);return TransformBlueprint}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports["default"]=pipeGen;var _streams=require("./streams"),GenObjManager=function(){function GenObjManager(gen,enqueue,readable){_classCallCheck(this,GenObjManager);var done=void 0,condEnqueue=function(v){void 0!==v&&enqueue(v)},promise=new Promise(function(resolve){done=resolve});Object.assign(this,{done:done,gen:gen,readable:readable,promise:promise,enqueue:condEnqueue,running:!1})}return _createClass(GenObjManager,[{key:"start",value:function(){!this.running&&this.gen&&(this.running=!0,this.tick())}},{key:"pause",value:function(){this.running=!1}},{key:"close",value:function(){this.pause(),this.gen["return"](),this.gen=null,this.done()}},{key:"flush",value:function(){var n=arguments.length<=0||void 0===arguments[0]?1:arguments[0];if(this.gen){for(this.pause();n--;)this.tick(!0);this.close()}}},{key:"tick",value:function(msg){var _gen$next=this.gen.next(msg),value=_gen$next.value,done=_gen$next.done;this.enqueue(value),done?this.close():this.running&&this.ready?this.tick(msg):this.pause()}},{key:"then",get:function(){return this.promise.then.bind(this.promise)}},{key:"ready",get:function(){return this.readable._controller.desiredSize>=0}}]),GenObjManager}();"undefined"!=typeof module&&(module.exports=pipeGen)},{"./streams":12}],11:[function(require,module,exports){"use strict";function split(stream){var parts=arguments.length<=1||void 0===arguments[1]?2:arguments[1];if(!stream.tee)throw new Error("Only readable streams can be split");var result=void 0,cancelFns=void 0,cancelAll=void 0;for(result=[stream];parts>result.length;){var s=result.pop();result=result.concat(s.tee())}return cancelFns=result.map(function(s){return s.cancel.bind(s)}),cancelAll=function(){return cancelFns.forEach(function(c){return c()})},result.forEach(function(s){s.cancelAll=cancelAll}),result}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=split,"undefined"!=typeof module&&(module.exports=split)},{}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var interfaces=void 0,global=global||{};if("undefined"!=typeof window&&(global=window),global.ReadableStream)interfaces={ReadableByteStream:global.ReadableByteStream,ReadableStream:global.ReadableStream,WritableStream:global.WritableStream,ByteLengthQueuingStrategy:global.ByteLengthQueuingStrategy,CountQueuingStrategy:global.CountQueuingStrategy,TransformStream:global.TransformStream};else try{interfaces=require("web-streams-polyfill")["default"]}catch(e){throw new Error("No Stream implementation found")}exports.ReadableByteStream=interfaces.ReadableByteStream,exports.ReadableStream=interfaces.ReadableStream,exports.WritableStream=interfaces.WritableStream,exports.ByteLengthQueuingStrategy=interfaces.ByteLengthQueuingStrategy,exports.CountQueuingStrategy=interfaces.CountQueuingStrategy,exports.TransformStream=interfaces.TransformStream;exports["default"]=interfaces},{"web-streams-polyfill":"web-streams-polyfill"}],13:[function(require,module,exports){"use strict";function zipWith(fn,arr1,arr2){for(var res=[];arr1.length&&arr2.length;)res.push(fn(arr1.pop(),arr2.pop()));return res}Object.defineProperty(exports,"__esModule",{value:!0}),exports.zipWith=zipWith;var isFunction=(exports.isTransform=function(s){return s&&s.writable&&s.readable},exports.isReadable=function(s){return s&&s.pipeThrough},exports.isWritable=function(s){return s&&s.write},exports.isFunction=function(f){return f&&"function"==typeof f});exports.isGenerator=function(o){return o&&isFunction(o.next)},exports.isGeneratorFn=function(_ref){var constructor=_ref.constructor;return constructor&&("GeneratorFunction"===constructor.name||"GeneratorFunction"===constructor.displayName)}},{}]},{},[5]);